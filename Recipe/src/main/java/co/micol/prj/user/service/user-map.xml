<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="co.micol.prj.user.service.UserMapper">


	<select id="selectUserList" resultType="co.micol.prj.user.service.UserVO">
		SELECT * FROM USERS
	</select>

	<select id="selectUser" parameterType="co.micol.prj.user.service.UserVO" resultType="com.micol.prj.user.service.UserVO">
		SELECT * FROM USERS WHERE USER_ID = #{userId}
		<if test="userPassword != null"> AND USER_PASSWORD = #{userPassword} </if>
	</select>

	<insert id="insertUser" parameterType="co.micol.prj.user.service.UserVO">
		INSERT INTO USERS
		VALUES(userno_seq, #{userId}, #{userPassword}, #{userName}, #{userAlias}, #{userAddress}, #{userTel}, #{userSubs}, 'USER')
	</insert>

	<update id="updateUser" parameterType="co.micol.prj.user.service.UserVO">
		UPDATE USERS
		<set>
			<if test="userPassword != null">SET USER_PASSWORD = #{userPassword},</if>
			<if test="userName != null">SET USER_NAME = #{userName},</if>
			<if test="userAlias != null">SET USER_ALIAS = #{userAlias},</if>
			<if test="userAddress != null">SET USER_ADDRESS = #{userAddress},</if>
			<if test="userTel != null">SET USER_TEL = #{userTel},</if>
			<if test="userSubs != null">SET USER_SUBSCRIBE = #{userSubs},</if>
		</set>
		WHERE USER_ID = #{userId}
	</update>

	<delete id="deleteUser" parameterType="co.micol.prj.user.service.UserVO">
		DELETE FROM USERS WHERE USER_ID = #{userId}
	</delete>

	<select id="isIdCheck" parameterType="String" resultType="boolean">
		SELECT CASE WHEN COUNT(USER_ID) = 1 THEN 0 ELSE 1 END AS ID
		FROM USERS WHERE USER_ID = #{str}
	</select>

</mapper>